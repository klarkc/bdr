<dom-module id="task-list">
    <template>
        <style>
            :host {
                display: block;
            }

            paper-fab {
                position: fixed;
                right: 16px;
                bottom: 16px;
            }

            task-card {
                margin: 16px;
            }

            task-dialog {
                @apply(--layout-vertical);
            }

            /* mobile-large */
            @media all and (min-width: 361px) and (orientation: portrait) {
                paper-fab {
                    right: 24px;
                    bottom: 24px;
                }

                task-card {
                    margin: 24px;
                }
            }

            /* mobile-large-landscape */
            @media all and (min-width: 481px) and (orientation: landscape) {
                paper-fab {
                    right: 24px;
                    bottom: 24px;
                }

                task-card {
                    margin: 24px;
                }
            }
        </style>
        <iron-ajax
            auto
            url="/tasks.json"
            handle-as="json"
            last-response="{{response}}">
        </iron-ajax>

        <div class="tasks">
            <template is="dom-repeat" items="{{response.tasks}}">
                <task-card task="{{item.Task}}"></task-card>
            </template>
        </div>

        <paper-fab icon="add" on-tap="_openDialog"></paper-fab>

        <task-dialog id="dialog"></task-dialog>
    </template>
    <script>
        Polymer({
            is:"task-list",
            _openDialog: function() {
                this.$.dialog.open();
            }
        });
    </script>
</dom-module>
